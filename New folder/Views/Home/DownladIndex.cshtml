
@{
    ViewBag.Title = "HomeIndex";
    Layout = "~/Views/Shared/Layout.cshtml";
}



<style>
    h1.italic {
        font-size: 40px;
        text-shadow: -1px -1px #fb6, 1px 1px #d60, -3px 0 4px #000;
        font-family: "Segoe print", Arial, Helvetica, sans-serif;
        color: #003341;
        font-weight: lighter;
        -moz-box-shadow: 2px 2px 6px #888;
        text-align: center;
        display: inline;
    }



    #btnDownlad {
        font-size: 30px;
        font-weight: bold;
        display: inline-block;
        margin: 0 auto;
        color: #dcfbb4;
        background-color: green;
        border: 0.4em solid #d4f7da;
        /* border-radius: 4%; */
        transition: all 0.3s;
        box-sizing: border-box;
        /* width: 4em; */
        /* height: 4em; */
        /* line-height: 3em; */
        cursor: pointer;
        box-shadow: 0 0 0 rgba(0,0,0,0.1), inset 0 0 0 rgba(0,0,0,0.1);
        text-align: center;
    }

    #btnDownlad:hover {
        box-shadow: 0 0 2em rgba(0,0,0,0.1), inset 0 0 1em rgba(0,0,0,0.1);
        background-color: #29a074;
    }

    span {
        display: block; 
        padding: 0 20px;
        margin: 0;
        word-break: keep-all;
        text-align: center;
    }

</style>

 
<div id="">

    @*<h1>Download</h1>*@

    <div class="col-xs-12 col-lg-12 col-sm-12">
        <br />
        <br />
    </div>
    <div id="Name_Eslam" class="col-xs-12 col-lg-12 col-sm-12  ">
        <h1 class="col-xs-12 col-lg-12 col-sm-12 animate__animated animate__jackInTheBox italic">Eslam Mamdouh</h1>
    </div>
    <div class="col-xs-12 col-lg-12 col-sm-12">
        <br />
        <br />
    </div>

    <div class="col-xs-1 col-lg-1 col-sm-1"></div>
    <button id="btnDownlad" class="col-xs-10 col-lg-10 col-sm-10 btn btn-custon-four btn-success animate__animated zoomIn" style="font-size: 20px;font-weight: bold;">

     

    </button>
    <div class="col-xs-1 col-lg-1 col-sm-1"></div>

    <input id="NameFile" type="hidden" disabled class="form-control" placeholder="NameFile : ">
    <input id="UrlFile" type="hidden" disabled class="form-control" placeholder="NameFile : ">

</div>




<script>

    var url_string = window.location.href;
    var url = new URL(url_string);
    var D = url.searchParams.get("D");
    var N = url.searchParams.get("N");

    $('#btnDownlad').html(' 🔰 Download 🔰 ( ' + N+' ) ');
    $('#NameFile').val(N);
    $('#UrlFile').val(D);


    $("#btnDownlad").on('click', function () {

        debugger
        var imageUrl =  $('#UrlFile').val() ;
        var filename = $('#NameFile').val();
         
        fetch(imageUrl)
            .then(response => response.blob())
            .then(blob => {
                const downloadLink = document.createElement("a");
                downloadLink.href = URL.createObjectURL(blob);
                downloadLink.download = filename;
                downloadLink.click();
                URL.revokeObjectURL(downloadLink.href);
                alert('Done Download')
            })
            .catch(error => {
                console.error("Error:", error);
            });

    });


</script>






