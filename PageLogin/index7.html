
<!doctype html>
<html>

<head>

    <link href="buttons.css" rel="stylesheet" />
</head>

<body id="main-menu" class=" materialdesign mini-navbar" style="background-color: black;">


    <ul>
        <li>
            <!--welcome-->
            <div class="waviy">
                <span style="--i:1">W</span>
                <span style="--i:2">e</span>
                <span style="--i:3">l</span>
                <span style="--i:4">c</span>
                <span style="--i:5">o</span>
                <span style="--i:6">m</span>
                <span style="--i:7">e</span>
                <span style="--i:8">!</span>
                <span style="--i:9">.</span>
                <span style="--i:10"> 7</span>

            </div>
        </li>
        <li>
            <div class="">
                <br />
            </div>
        </li>
        <li>
            <div class="">
                <br />
            </div>
        </li>
        <li>
            <div class="">
                <br />
            </div>
        </li>
        <li>
            <div class="">
                <br />
            </div>
        </li>
        <li>
            <div class="">
                <br />
            </div>
        </li>
        <li>
            <div class="wrap">

                <button onclick="OpenPage()" id="Open" class="button">Open Site</button>
            </div>
        </li>
    </ul>




     
    <script>
        //GetUrlConfig
 
        var Num_Random = Math.random()

        GetUrl();


        function GetUrl() {
            let req = new XMLHttpRequest();

            req.onreadystatechange = () => {
                if (req.readyState == XMLHttpRequest.DONE) {
                    try {
                        const dataObject = JSON.parse(req.responseText); 
                        var url = dataObject.record.Url7
                        sessionStorage.setItem("UrlConfig" + Num_Random, url);
                    } catch (e) { 
                        document.getElementById('Open').className = 'button_Error';
                        document.getElementById('Open').innerHTML = "Now it not work";
                    }
                  
                }
            };

            req.open("GET", "https://api.jsonbin.io/v3/b/64e262588e4aa6225ed2f06d", true);
            req.setRequestHeader("X-Master-Key", "$2b$10$7.e5N.Z8fAP1A.11R42fPu9Q.RMb/NWhKQ8PEf9fG05u9VN9rYJFe");
            req.send();
              
        }


        function GetUrlOpen() {

            let req = new XMLHttpRequest();

            req.onreadystatechange = () => {
                if (req.readyState == XMLHttpRequest.DONE) {
                    try {
                        const dataObject = JSON.parse(req.responseText); 
                        var url = dataObject.record.Url7
                        sessionStorage.setItem("UrlConfig" + Num_Random, url);

                        var randomQueryParam = "nocache=" + Num_Random;
                        window.open(url + "?" + randomQueryParam, "_self");
                    } catch (e) { 
                        document.getElementById('Open').className = 'button_Error';
                        document.getElementById('Open').innerHTML = "Now it not work";
                    }
                
                }
            };

            req.open("GET", "https://api.jsonbin.io/v3/b/64e262588e4aa6225ed2f06d", true);
            req.setRequestHeader("X-Master-Key", "$2b$10$7.e5N.Z8fAP1A.11R42fPu9Q.RMb/NWhKQ8PEf9fG05u9VN9rYJFe");
            req.send();


        }



        function OpenPage() {

            let url = sessionStorage.getItem("UrlConfig" + Num_Random)

            if (url == null) { 
                GetUrlOpen();
            }
            else { 
                var randomQueryParam = "nocache=" + Num_Random; 
                window.open(url + "?" + randomQueryParam, "_self");
            }
        }






        function PushNotification(Message) {
            if (!("Notification" in window)) {
                alert("This browser does not support desktop notification");
            } else if (Notification.permission === "granted") {
                // If it's okay let's create a notification
                var notification = new Notification(Message);
            } else if (Notification.permission !== "denied") {
                Notification.requestPermission(function (permission) {
                    // If the user is okay, let's create a notification
                    if (permission === "granted") {
                        var notification = new Notification(Message);
                    }
                });
            }
        }









        //function GetUrl() {
        //    fetch("https://sheetdb.io/api/v1/576r7o2uvnu0l", {
        //        method: "GET"
        //    }).then(response => response.json())
        //        .then(UrlConfig => {
        //            debugger;
        //            UrlConfig = UrlConfig.filter(x => x.Url2.trim() !== "" && x.Url2.trim() !== "There is no link");
        //            var url = UrlConfig[UrlConfig.length - 1].Url2;
        //            sessionStorage.setItem("UrlConfig" + Num_Random, url);

        //        });
        //}



    </script>



</body>



</html>